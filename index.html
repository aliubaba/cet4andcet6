<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WordMaster - å››å…­çº§å•è¯æŒ‘æˆ˜</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700;900&family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Poppins', 'Noto Sans SC', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .card-shadow {
            box-shadow: 0 20px 40px -5px rgba(102, 126, 234, 0.3);
        }
        
        .float-animation {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        .shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }
        
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
        
        .bounce-in {
            animation: bounceIn 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        @keyframes bounceIn {
            0% { opacity: 0; transform: scale(0.3); }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        .slide-up {
            animation: slideUp 0.4s ease-out;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .progress-ring {
            transition: stroke-dashoffset 0.35s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        
        .option-btn {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .option-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px -5px rgba(102, 126, 234, 0.4);
        }
        
        .option-btn:active:not(:disabled) {
            transform: translateY(0);
        }
        
        .correct-answer {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
            color: white !important;
            transform: scale(1.02);
        }
        
        .wrong-answer {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
            color: white !important;
            animation: shake 0.5s;
        }
        
        .streak-flame {
            animation: flame 1s ease-in-out infinite alternate;
        }
        
        @keyframes flame {
            0% { transform: scale(1) rotate(-2deg); }
            100% { transform: scale(1.1) rotate(2deg); }
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #f0f;
            animation: confetti-fall 3s linear forwards;
        }
        
        @keyframes confetti-fall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        
        .word-reveal {
            background: linear-gradient(90deg, #667eea, #764ba2, #667eea);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shine 3s linear infinite;
        }
        
        @keyframes shine {
            to { background-position: 200% center; }
        }
    </style>
</head>
<body class="gradient-bg min-h-screen flex items-center justify-center p-4 overflow-hidden relative">

    <!-- èƒŒæ™¯è£…é¥° -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
        <div class="absolute top-10 left-10 w-32 h-32 bg-white opacity-10 rounded-full float-animation"></div>
        <div class="absolute bottom-20 right-20 w-48 h-48 bg-white opacity-5 rounded-full float-animation" style="animation-delay: 2s;"></div>
        <div class="absolute top-1/2 left-1/4 w-24 h-24 bg-white opacity-10 rounded-full float-animation" style="animation-delay: 4s;"></div>
    </div>

    <!-- ä¸»å®¹å™¨ -->
    <div id="app" class="w-full max-w-2xl relative z-10">
        
        <!-- å¼€å§‹ç•Œé¢ -->
        <div id="start-screen" class="glass-effect rounded-3xl p-8 md:p-12 card-shadow text-center bounce-in">
            <div class="mb-6 relative inline-block">
                <div class="text-6xl mb-2">ğŸ“š</div>
                <div class="absolute -top-2 -right-2 text-3xl streak-flame">ğŸ”¥</div>
            </div>
            
            <h1 class="text-4xl md:text-5xl font-black text-gray-800 mb-4 word-reveal">
                WordMaster
            </h1>
            <p class="text-gray-600 text-lg mb-8">å››å…­çº§å•è¯æŒ‘æˆ˜ Â· è®©èƒŒå•è¯å˜å¾—æœ‰è¶£</p>
            
            <div class="space-y-4 mb-8">
                <div class="flex justify-center gap-4">
                    <button onclick="selectLevel('cet4')" id="btn-cet4" class="level-btn px-6 py-3 rounded-xl bg-indigo-100 text-indigo-700 font-bold border-2 border-indigo-200 hover:border-indigo-500 transition-all transform hover:scale-105">
                        å››çº§è¯æ±‡
                    </button>
                    <button onclick="selectLevel('cet6')" id="btn-cet6" class="level-btn px-6 py-3 rounded-xl bg-white text-gray-600 font-bold border-2 border-gray-200 hover:border-purple-500 hover:text-purple-600 transition-all transform hover:scale-105">
                        å…­çº§è¯æ±‡
                    </button>
                </div>
            </div>

            <div class="grid grid-cols-3 gap-4 mb-8 text-sm text-gray-600">
                <div class="bg-indigo-50 p-3 rounded-xl">
                    <div class="text-2xl mb-1">ğŸ¯</div>
                    <div>å¤šç§é¢˜å‹</div>
                </div>
                <div class="bg-purple-50 p-3 rounded-xl">
                    <div class="text-2xl mb-1">âš¡</div>
                    <div>å³æ—¶åé¦ˆ</div>
                </div>
                <div class="bg-pink-50 p-3 rounded-xl">
                    <div class="text-2xl mb-1">ğŸ†</div>
                    <div>æˆå°±ç³»ç»Ÿ</div>
                </div>
            </div>

            <button onclick="startGame()" class="w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-2xl font-bold text-xl shadow-lg hover:shadow-2xl transform hover:scale-[1.02] transition-all active:scale-95">
                å¼€å§‹æŒ‘æˆ˜ ğŸš€
            </button>
        </div>

        <!-- æ¸¸æˆç•Œé¢ -->
        <div id="game-screen" class="hidden glass-effect rounded-3xl p-6 md:p-8 card-shadow">
            <!-- é¡¶éƒ¨çŠ¶æ€æ  -->
            <div class="flex justify-between items-center mb-6">
                <div class="flex items-center gap-2">
                    <button onclick="quitGame()" class="p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-500">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                    <span id="level-badge" class="px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-sm font-bold">CET-4</span>
                </div>
                
                <div class="flex items-center gap-4">
                    <div class="flex items-center gap-1 text-orange-500 font-bold">
                        <span class="text-xl streak-flame">ğŸ”¥</span>
                        <span id="streak-count">0</span>
                    </div>
                    <div class="relative w-12 h-12">
                        <svg class="w-12 h-12 transform -rotate-90">
                            <circle cx="24" cy="24" r="20" stroke="#e5e7eb" stroke-width="4" fill="none"></circle>
                            <circle id="progress-ring" cx="24" cy="24" r="20" stroke="#667eea" stroke-width="4" fill="none" stroke-dasharray="125.6" stroke-dashoffset="125.6" class="progress-ring"></circle>
                        </svg>
                        <span id="question-number" class="absolute inset-0 flex items-center justify-center text-sm font-bold text-gray-700">1/10</span>
                    </div>
                </div>
            </div>

            <!-- åˆ†æ•°æ˜¾ç¤º -->
            <div class="text-center mb-6">
                <div class="text-3xl font-black text-gray-800">
                    <span id="score">0</span>
                    <span class="text-lg text-gray-400 font-normal">åˆ†</span>
                </div>
            </div>

            <!-- é¢˜ç›®åŒºåŸŸ -->
            <div id="question-container" class="mb-6">
                <!-- åŠ¨æ€å†…å®¹ -->
            </div>

            <!-- é€‰é¡¹åŒºåŸŸ -->
            <div id="options-container" class="space-y-3">
                <!-- åŠ¨æ€é€‰é¡¹ -->
            </div>

            <!-- åé¦ˆåŒºåŸŸ -->
            <div id="feedback" class="hidden mt-6 p-4 rounded-2xl text-center font-bold text-lg slide-up"></div>

            <!-- ä¸‹ä¸€é¢˜æŒ‰é’® -->
            <button id="next-btn" onclick="nextQuestion()" class="hidden w-full mt-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all">
                ä¸‹ä¸€é¢˜ â†’
            </button>
        </div>

        <!-- ç»“æœç•Œé¢ -->
        <div id="result-screen" class="hidden glass-effect rounded-3xl p-8 card-shadow text-center">
            <div class="mb-6">
                <div id="result-emoji" class="text-6xl mb-4 bounce-in">ğŸ‰</div>
                <h2 class="text-3xl font-black text-gray-800 mb-2">æŒ‘æˆ˜å®Œæˆ!</h2>
                <p id="result-message" class="text-gray-600">å¤ªæ£’äº†ï¼ç»§ç»­ä¿æŒ</p>
            </div>

            <div class="grid grid-cols-2 gap-4 mb-8">
                <div class="bg-indigo-50 p-4 rounded-2xl">
                    <div class="text-3xl font-black text-indigo-600" id="final-score">0</div>
                    <div class="text-sm text-gray-600">æœ€ç»ˆå¾—åˆ†</div>
                </div>
                <div class="bg-purple-50 p-4 rounded-2xl">
                    <div class="text-3xl font-black text-purple-600" id="accuracy">0%</div>
                    <div class="text-sm text-gray-600">æ­£ç¡®ç‡</div>
                </div>
                <div class="bg-orange-50 p-4 rounded-2xl">
                    <div class="text-3xl font-black text-orange-600" id="max-streak">0</div>
                    <div class="text-sm text-gray-600">æœ€é«˜è¿å‡»</div>
                </div>
                <div class="bg-green-50 p-4 rounded-2xl">
                    <div class="text-3xl font-black text-green-600" id="correct-count">0/10</div>
                    <div class="text-sm text-gray-600">ç­”å¯¹é¢˜æ•°</div>
                </div>
            </div>

            <div id="achievement-badge" class="hidden mb-6 p-4 bg-gradient-to-r from-yellow-100 to-orange-100 rounded-2xl border-2 border-yellow-300 bounce-in">
                <div class="text-2xl mb-1">ğŸ†</div>
                <div class="font-bold text-yellow-800" id="achievement-text">å•è¯å¤§å¸ˆ</div>
            </div>

            <div class="space-y-3">
                <button onclick="restartGame()" class="w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-2xl font-bold text-lg shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all">
                    å†ç©ä¸€æ¬¡ ğŸ”„
                </button>
                <button onclick="backToHome()" class="w-full py-3 bg-gray-100 text-gray-700 rounded-2xl font-bold hover:bg-gray-200 transition-all">
                    è¿”å›é¦–é¡µ
                </button>
            </div>
        </div>
    </div>

    <script>
        // è¯æ±‡æ•°æ®åº“
        const vocabulary = {
            cet4: [
                { word: "abandon", meaning: "æ”¾å¼ƒï¼ŒæŠ›å¼ƒ", options: ["æ”¾å¼ƒï¼ŒæŠ›å¼ƒ", "æ¥å—ï¼ŒåŒæ„", "æé«˜ï¼Œæ”¹å–„", "å‡å°‘ï¼Œé™ä½"], type: "choice" },
                { word: "ability", meaning: "èƒ½åŠ›ï¼Œæ‰èƒ½", options: ["èƒ½åŠ›ï¼Œæ‰èƒ½", "æ®‹ç–¾ï¼Œæ— èƒ½", "ç¨³å®šï¼Œå®‰å®š", "å˜åŒ–ï¼Œå˜åŠ¨"], type: "choice" },
                { word: "absence", meaning: "ç¼ºå¸­ï¼Œä¸åœ¨", options: ["å‡ºå¸­ï¼Œåœ¨åœº", "ç¼ºå¸­ï¼Œä¸åœ¨", "å­˜åœ¨ï¼Œå‡ºç°", "å‚åŠ ï¼Œå‚ä¸"], type: "choice" },
                { word: "absolute", meaning: "ç»å¯¹çš„ï¼Œå®Œå…¨çš„", options: ["ç›¸å¯¹çš„ï¼Œæ¯”è¾ƒçš„", "ç»å¯¹çš„ï¼Œå®Œå…¨çš„", "éƒ¨åˆ†çš„ï¼Œä¸å®Œå…¨çš„", "å¯èƒ½çš„ï¼Œä¹Ÿè®¸çš„"], type: "choice" },
                { word: "absorb", meaning: "å¸æ”¶ï¼Œå¸å¼•", options: ["é‡Šæ”¾ï¼Œæ”¾å‡º", "å¸æ”¶ï¼Œå¸å¼•", "æ’æ–¥ï¼Œæ‹’ç»", "åˆ†æ•£ï¼Œæ•£å¼€"], type: "choice" },
                { word: "abstract", meaning: "æŠ½è±¡çš„ï¼Œæ‘˜è¦", options: ["å…·ä½“çš„ï¼Œå®åœ¨çš„", "æŠ½è±¡çš„ï¼Œæ‘˜è¦", "ç®€å•çš„ï¼Œå®¹æ˜“çš„", "å¤æ‚çš„ï¼Œå›°éš¾çš„"], type: "choice" },
                { word: "abundant", meaning: "ä¸°å¯Œçš„ï¼Œå……è£•çš„", options: ["ç¼ºä¹çš„ï¼Œä¸è¶³çš„", "ä¸°å¯Œçš„ï¼Œå……è£•çš„", "æ™®é€šçš„ï¼Œä¸€èˆ¬çš„", "ç¨€æœ‰çš„ï¼Œçè´µçš„"], type: "choice" },
                { word: "academic", meaning: "å­¦æœ¯çš„ï¼Œå­¦é™¢çš„", options: ["å­¦æœ¯çš„ï¼Œå­¦é™¢çš„", "å•†ä¸šçš„ï¼Œè´¸æ˜“çš„", "å·¥ä¸šçš„ï¼Œäº§ä¸šçš„", "å†œä¸šçš„ï¼Œå†œè€•çš„"], type: "choice" },
                { word: "accelerate", meaning: "åŠ é€Ÿï¼Œä¿ƒè¿›", options: ["å‡é€Ÿï¼Œæ”¾æ…¢", "åŠ é€Ÿï¼Œä¿ƒè¿›", "åœæ­¢ï¼Œé™æ­¢", "ç»´æŒï¼Œä¿æŒ"], type: "choice" },
                { word: "access", meaning: "è¿›å…¥ï¼Œä½¿ç”¨æƒ", options: ["å‡ºå£ï¼Œç¦»å¼€", "è¿›å…¥ï¼Œä½¿ç”¨æƒ", "ç¦æ­¢ï¼Œé˜»æ­¢", "é™åˆ¶ï¼Œå±€é™"], type: "choice" },
                { word: "accommodate", meaning: "å®¹çº³ï¼Œé€‚åº”", options: ["æ‹’ç»ï¼Œæ’æ–¥", "å®¹çº³ï¼Œé€‚åº”", "å¿½è§†ï¼Œå¿½ç•¥", "åå¯¹ï¼ŒåæŠ—"], type: "choice" },
                { word: "accomplish", meaning: "å®Œæˆï¼Œå®ç°", options: ["å¼€å§‹ï¼Œç€æ‰‹", "å®Œæˆï¼Œå®ç°", "æ”¾å¼ƒï¼Œä¸­æ­¢", "æ¨è¿Ÿï¼Œå»¶æœŸ"], type: "choice" },
                { word: "accumulate", meaning: "ç§¯ç´¯ï¼Œç§¯èš", options: ["åˆ†æ•£ï¼Œæ•£å¼€", "ç§¯ç´¯ï¼Œç§¯èš", "æ¶ˆè€—ï¼ŒèŠ±è´¹", "ä¸¢å¤±ï¼Œé—å¤±"], type: "choice" },
                { word: "accurate", meaning: "ç²¾ç¡®çš„ï¼Œå‡†ç¡®çš„", options: ["é”™è¯¯çš„ï¼Œä¸å‡†ç¡®çš„", "ç²¾ç¡®çš„ï¼Œå‡†ç¡®çš„", "å¤§æ¦‚çš„ï¼Œç²—ç•¥çš„", "æ¨¡ç³Šçš„ï¼Œä¸æ¸…æ¥šçš„"], type: "choice" },
                { word: "achieve", meaning: "è¾¾åˆ°ï¼Œå®ç°", options: ["å¤±è´¥ï¼Œå¤±åˆ©", "è¾¾åˆ°ï¼Œå®ç°", "æ”¾å¼ƒï¼ŒæŠ›å¼ƒ", "ç ´åï¼Œæ¯å"], type: "choice" }
            ],
            cet6: [
                { word: "ambiguous", meaning: "æ¨¡æ£±ä¸¤å¯çš„ï¼Œå«ç³Šçš„", options: ["æ¸…æ™°çš„ï¼Œæ˜ç¡®çš„", "æ¨¡æ£±ä¸¤å¯çš„ï¼Œå«ç³Šçš„", "ç®€å•çš„ï¼Œç®€æ˜“çš„", "å¤æ‚çš„ï¼Œéš¾æ‡‚çš„"], type: "choice" },
                { word: "analogy", meaning: "ç±»æ¯”ï¼Œç±»æ¨", options: ["å¯¹æ¯”ï¼Œå¯¹ç…§", "ç±»æ¯”ï¼Œç±»æ¨", "å·®å¼‚ï¼Œä¸åŒ", "ç›¸ç­‰ï¼Œç›¸åŒ"], type: "choice" },
                { word: "anticipate", meaning: "é¢„æœŸï¼Œé¢„æ–™", options: ["å›å¿†ï¼Œå›æƒ³", "é¢„æœŸï¼Œé¢„æ–™", "è·Ÿéšï¼Œè¿½éš", "å¿½è§†ï¼Œå¿½ç•¥"], type: "choice" },
                { word: "apparent", meaning: "æ˜æ˜¾çš„ï¼Œæ˜¾ç„¶çš„", options: ["éšè—çš„ï¼Œéšè”½çš„", "æ˜æ˜¾çš„ï¼Œæ˜¾ç„¶çš„", "è™šå‡çš„ï¼Œä¼ªé€ çš„", "çœŸå®çš„ï¼ŒçœŸæ­£çš„"], type: "choice" },
                { word: "arbitrary", meaning: "ä»»æ„çš„ï¼Œæ­¦æ–­çš„", options: ["åˆç†çš„ï¼Œç†æ€§çš„", "ä»»æ„çš„ï¼Œæ­¦æ–­çš„", "å›ºå®šçš„ï¼Œä¸å˜çš„", "çµæ´»çš„ï¼Œå¯å˜çš„"], type: "choice" },
                { word: "articulate", meaning: "å–„äºè¡¨è¾¾çš„ï¼Œå‘éŸ³æ¸…æ™°çš„", options: ["å£é½¿ä¸æ¸…çš„", "å–„äºè¡¨è¾¾çš„ï¼Œå‘éŸ³æ¸…æ™°çš„", "æ²‰é»˜çš„ï¼Œå¯¡è¨€çš„", "å®³ç¾çš„ï¼Œèƒ†æ€¯çš„"], type: "choice" },
                { word: "assert", meaning: "æ–­è¨€ï¼ŒåšæŒ", options: ["å¦è®¤ï¼Œå¦å®š", "æ–­è¨€ï¼ŒåšæŒ", "æ€€ç–‘ï¼Œè´¨ç–‘", "æ”¾å¼ƒï¼Œè®©æ­¥"], type: "choice" },
                { word: "assess", meaning: "è¯„ä¼°ï¼Œè¯„ä»·", options: ["å¿½è§†ï¼Œå¿½ç•¥", "è¯„ä¼°ï¼Œè¯„ä»·", "æ¥å—ï¼ŒåŒæ„", "æ‹’ç»ï¼Œåå¯¹"], type: "choice" },
                { word: "assign", meaning: "åˆ†é…ï¼ŒæŒ‡æ´¾", options: ["æ”¶å›ï¼Œå–å›", "åˆ†é…ï¼ŒæŒ‡æ´¾", "æ‹’ç»ï¼Œå¦è®¤", "èšé›†ï¼Œé›†åˆ"], type: "choice" },
                { word: "assume", meaning: "å‡å®šï¼Œå‡è®¾", options: ["è¯æ˜ï¼Œè¯å®", "å‡å®šï¼Œå‡è®¾", "å¦è®¤ï¼Œå¦å®š", "ç»“æŸï¼Œç»ˆæ­¢"], type: "choice" },
                { word: "available", meaning: "å¯ç”¨çš„ï¼Œæœ‰ç©ºçš„", options: ["å¿™ç¢Œçš„ï¼Œæ²¡ç©ºçš„", "å¯ç”¨çš„ï¼Œæœ‰ç©ºçš„", "æ— æ•ˆçš„ï¼Œä½œåºŸçš„", "ç¨€ç¼ºçš„ï¼Œä¸è¶³çš„"], type: "choice" },
                { word: "aware", meaning: "æ„è¯†åˆ°çš„ï¼ŒçŸ¥é“çš„", options: ["æ— çŸ¥çš„ï¼Œä¸çŸ¥é“çš„", "æ„è¯†åˆ°çš„ï¼ŒçŸ¥é“çš„", " asleepç¡ç€çš„", "å¿™ç¢Œçš„ï¼Œæ— æš‡çš„"], type: "choice" },
                { word: "bias", meaning: "åè§ï¼Œåå¿ƒ", options: ["å…¬å¹³ï¼Œå…¬æ­£", "åè§ï¼Œåå¿ƒ", "çœŸç†ï¼Œäº‹å®", "è¯æ®ï¼Œè¯æ˜"], type: "choice" },
                { word: "brief", meaning: "ç®€çŸ­çš„ï¼Œç®€è¦çš„", options: ["å†—é•¿çš„ï¼Œæ¼«é•¿çš„", "ç®€çŸ­çš„ï¼Œç®€è¦çš„", "è¯¦ç»†çš„ï¼Œè¯¦å°½çš„", "å¤æ‚çš„ï¼Œéš¾æ‡‚çš„"], type: "choice" },
                { word: "capable", meaning: "æœ‰èƒ½åŠ›çš„ï¼Œèƒ½å¹²çš„", options: ["æ— èƒ½çš„ï¼Œä¸èƒ½çš„", "æœ‰èƒ½åŠ›çš„ï¼Œèƒ½å¹²çš„", "æ‡’æƒ°çš„ï¼Œæ‡ˆæ€ çš„", "ç¬¨æ‹™çš„ï¼Œä¸çµæ´»çš„"], type: "choice" }
            ]
        };

        // æ¸¸æˆçŠ¶æ€
        let currentLevel = 'cet4';
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let streak = 0;
        let maxStreak = 0;
        let correctAnswers = 0;
        let answered = false;

        // é€‰æ‹©éš¾åº¦
        function selectLevel(level) {
            currentLevel = level;
            document.querySelectorAll('.level-btn').forEach(btn => {
                btn.classList.remove('bg-indigo-100', 'text-indigo-700', 'border-indigo-500');
                btn.classList.add('bg-white', 'text-gray-600', 'border-gray-200');
            });
            
            const selectedBtn = document.getElementById(`btn-${level}`);
            selectedBtn.classList.remove('bg-white', 'text-gray-600', 'border-gray-200');
            selectedBtn.classList.add('bg-indigo-100', 'text-indigo-700', 'border-indigo-500');
        }

        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            // éšæœºé€‰æ‹©10é“é¢˜
            const allQuestions = [...vocabulary[currentLevel]];
            currentQuestions = shuffleArray(allQuestions).slice(0, 10);
            currentQuestionIndex = 0;
            score = 0;
            streak = 0;
            maxStreak = 0;
            correctAnswers = 0;
            
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('game-screen').classList.remove('hidden');
            document.getElementById('level-badge').textContent = currentLevel === 'cet4' ? 'CET-4' : 'CET-6';
            
            showQuestion();
        }

        // æ˜¾ç¤ºé¢˜ç›®
        function showQuestion() {
            answered = false;
            const question = currentQuestions[currentQuestionIndex];
            
            // æ›´æ–°è¿›åº¦ç¯
            const progress = ((currentQuestionIndex + 1) / 10) * 125.6;
            document.getElementById('progress-ring').style.strokeDashoffset = 125.6 - progress;
            document.getElementById('question-number').textContent = `${currentQuestionIndex + 1}/10`;
            
            // æ¸…ç©ºåé¦ˆ
            document.getElementById('feedback').classList.add('hidden');
            document.getElementById('next-btn').classList.add('hidden');
            
            // ç”Ÿæˆé¢˜ç›®HTML
            const questionContainer = document.getElementById('question-container');
            const optionsContainer = document.getElementById('options-container');
            
            // éšæœºå†³å®šé¢˜å‹ï¼šçœ‹è¯é€‰ä¹‰ æˆ– çœ‹ä¹‰é€‰è¯
            const questionType = Math.random() > 0.5 ? 'word-to-meaning' : 'meaning-to-word';
            
            if (questionType === 'word-to-meaning') {
                questionContainer.innerHTML = `
                    <div class="text-center mb-8">
                        <div class="text-5xl font-black text-gray-800 mb-4 tracking-wide">${question.word}</div>
                        <div class="text-gray-500 text-sm">é€‰æ‹©æ­£ç¡®çš„ä¸­æ–‡é‡Šä¹‰</div>
                    </div>
                `;
                
                // ç”Ÿæˆé€‰é¡¹ï¼ˆåŒ…å«æ­£ç¡®ç­”æ¡ˆå’Œ3ä¸ªé”™è¯¯ç­”æ¡ˆï¼‰
                const options = shuffleArray([...question.options]);
                optionsContainer.innerHTML = options.map((option, index) => `
                    <button onclick="checkAnswer('${option}', '${question.meaning}', this)" 
                            class="option-btn w-full p-4 bg-white border-2 border-gray-200 rounded-xl text-left font-medium text-gray-700 hover:border-indigo-400 hover:bg-indigo-50 transition-all">
                        <span class="inline-block w-8 h-8 bg-gray-100 rounded-full text-center leading-8 mr-3 text-sm font-bold text-gray-500">${String.fromCharCode(65 + index)}</span>
                        ${option}
                    </button>
                `).join('');
            } else {
                questionContainer.innerHTML = `
                    <div class="text-center mb-8">
                        <div class="text-2xl font-bold text-gray-800 mb-4 leading-relaxed">${question.meaning}</div>
                        <div class="text-gray-500 text-sm">é€‰æ‹©æ­£ç¡®çš„è‹±æ–‡å•è¯</div>
                    </div>
                `;
                
                // ç”Ÿæˆå•è¯é€‰é¡¹ï¼ˆéœ€è¦è·å–å…¶ä»–å•è¯ä½œä¸ºå¹²æ‰°é¡¹ï¼‰
                const otherWords = vocabulary[currentLevel]
                    .filter(w => w.word !== question.word)
                    .slice(0, 3);
                const wordOptions = shuffleArray([question, ...otherWords]);
                
                optionsContainer.innerHTML = wordOptions.map((item, index) => `
                    <button onclick="checkAnswer('${item.word}', '${question.word}', this)" 
                            class="option-btn w-full p-4 bg-white border-2 border-gray-200 rounded-xl text-left font-medium text-gray-700 hover:border-indigo-400 hover:bg-indigo-50 transition-all">
                        <span class="inline-block w-8 h-8 bg-gray-100 rounded-full text-center leading-8 mr-3 text-sm font-bold text-gray-500">${String.fromCharCode(65 + index)}</span>
                        ${item.word}
                    </button>
                `).join('');
            }
            
            // æ·»åŠ è¿›å…¥åŠ¨ç”»
            questionContainer.classList.remove('slide-up');
            void questionContainer.offsetWidth; // è§¦å‘é‡æ’
            questionContainer.classList.add('slide-up');
        }

        // æ£€æŸ¥ç­”æ¡ˆ
        function checkAnswer(selected, correct, btnElement) {
            if (answered) return;
            answered = true;
            
            const isCorrect = selected === correct;
            const buttons = document.querySelectorAll('.option-btn');
            
            // ç¦ç”¨æ‰€æœ‰æŒ‰é’®
            buttons.forEach(btn => {
                btn.disabled = true;
                btn.classList.add('cursor-not-allowed', 'opacity-70');
            });
            
            // é«˜äº®æ­£ç¡®ç­”æ¡ˆ
            buttons.forEach(btn => {
                if (btn.textContent.includes(correct) || btn.onclick.toString().includes(correct)) {
                    btn.classList.add('correct-answer');
                    btn.classList.remove('bg-white', 'border-gray-200');
                }
            });
            
            const feedback = document.getElementById('feedback');
            
            if (isCorrect) {
                // è®¡ç®—å¾—åˆ†ï¼ˆè¿å‡»åŠ æˆï¼‰
                const baseScore = 10;
                const streakBonus = Math.min(streak * 2, 10);
                const points = baseScore + streakBonus;
                score += points;
                streak++;
                if (streak > maxStreak) maxStreak = streak;
                correctAnswers++;
                
                // æ˜¾ç¤ºæ­£ç¡®åé¦ˆ
                btnElement.classList.add('correct-answer');
                feedback.innerHTML = `
                    <div class="text-green-600 flex items-center justify-center gap-2">
                        <span class="text-2xl">âœ“</span>
                        <div>
                            <div>å›ç­”æ­£ç¡®ï¼+${points}åˆ†</div>
                            ${streak > 1 ? `<div class="text-sm text-orange-500">ğŸ”¥ è¿å‡» x${streak}</div>` : ''}
                        </div>
                    </div>
                `;
                feedback.className = 'mt-6 p-4 rounded-2xl bg-green-50 border-2 border-green-200 text-center font-bold text-lg slide-up';
                
                // æ’­æ”¾æˆåŠŸéŸ³æ•ˆï¼ˆè§†è§‰åé¦ˆï¼‰
                createConfetti();
            } else {
                // é”™è¯¯å¤„ç†
                streak = 0;
                btnElement.classList.add('wrong-answer');
                feedback.innerHTML = `
                    <div class="text-red-600 flex items-center justify-center gap-2">
                        <span class="text-2xl">âœ—</span>
                        <div>
                            <div>å›ç­”é”™è¯¯</div>
                            <div class="text-sm text-gray-600">æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š${correct}</div>
                        </div>
                    </div>
                `;
                feedback.className = 'mt-6 p-4 rounded-2xl bg-red-50 border-2 border-red-200 text-center font-bold text-lg slide-up';
            }
            
            feedback.classList.remove('hidden');
            document.getElementById('score').textContent = score;
            document.getElementById('streak-count').textContent = streak;
            document.getElementById('next-btn').classList.remove('hidden');
            
            // æœ€åä¸€é¢˜æ˜¾ç¤º"æŸ¥çœ‹ç»“æœ"
            if (currentQuestionIndex === 9) {
                document.getElementById('next-btn').textContent = 'æŸ¥çœ‹ç»“æœ ğŸ†';
            }
        }

        // ä¸‹ä¸€é¢˜
        function nextQuestion() {
            if (currentQuestionIndex < 9) {
                currentQuestionIndex++;
                showQuestion();
            } else {
                showResults();
            }
        }

        // æ˜¾ç¤ºç»“æœ
        function showResults() {
            document.getElementById('game-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');
            
            const accuracy = Math.round((correctAnswers / 10) * 100);
            document.getElementById('final-score').textContent = score;
            document.getElementById('accuracy').textContent = accuracy + '%';
            document.getElementById('max-streak').textContent = maxStreak;
            document.getElementById('correct-count').textContent = `${correctAnswers}/10`;
            
            // æ ¹æ®è¡¨ç°ç»™å‡ºè¯„ä»·å’Œæˆå°±
            let emoji = 'ğŸ˜Š';
            let message = 'ç»§ç»­åŠ æ²¹ï¼';
            let achievement = null;
            
            if (accuracy === 100) {
                emoji = 'ğŸ†';
                message = 'å®Œç¾ï¼ä½ æ˜¯å•è¯å¤§å¸ˆï¼';
                achievement = 'æ»¡åˆ†ç‹è€…';
            } else if (accuracy >= 80) {
                emoji = 'ğŸŒŸ';
                message = 'å¤ªæ£’äº†ï¼è¡¨ç°ä¼˜å¼‚ï¼';
                achievement = 'è¯æ±‡è¾¾äºº';
            } else if (accuracy >= 60) {
                emoji = 'ğŸ‘';
                message = 'ä¸é”™å“¦ï¼ç»§ç»­å·©å›ºï¼';
                achievement = 'å­¦ä¹ èƒ½æ‰‹';
            } else {
                emoji = 'ğŸ’ª';
                message = 'å†æ¥å†å‰ï¼Œå¤šå¤šç»ƒä¹ ï¼';
            }
            
            if (maxStreak >= 5) {
                achievement = achievement ? achievement + ' Â· è¿å‡»é«˜æ‰‹' : 'è¿å‡»é«˜æ‰‹';
            }
            
            document.getElementById('result-emoji').textContent = emoji;
            document.getElementById('result-message').textContent = message;
            
            if (achievement) {
                document.getElementById('achievement-badge').classList.remove('hidden');
                document.getElementById('achievement-text').textContent = achievement;
            } else {
                document.getElementById('achievement-badge').classList.add('hidden');
            }
            
            // å¤§æˆåŠŸæ—¶æ”¾çƒŸèŠ±
            if (accuracy >= 80) {
                for (let i = 0; i < 5; i++) {
                    setTimeout(() => createConfetti(), i * 300);
                }
            }
        }

        // é‡æ–°å¼€å§‹
        function restartGame() {
            document.getElementById('result-screen').classList.add('hidden');
            startGame();
        }

        // è¿”å›é¦–é¡µ
        function backToHome() {
            document.getElementById('result-screen').classList.add('hidden');
            document.getElementById('start-screen').classList.remove('hidden');
            document.getElementById('next-btn').textContent = 'ä¸‹ä¸€é¢˜ â†’';
        }

        // é€€å‡ºæ¸¸æˆ
        function quitGame() {
            if (confirm('ç¡®å®šè¦é€€å‡ºå½“å‰æ¸¸æˆå—ï¼Ÿè¿›åº¦å°†ä¸ä¼šä¿å­˜ã€‚')) {
                document.getElementById('game-screen').classList.add('hidden');
                document.getElementById('start-screen').classList.remove('hidden');
                document.getElementById('next-btn').textContent = 'ä¸‹ä¸€é¢˜ â†’';
            }
        }

        // è¾…åŠ©å‡½æ•°ï¼šéšæœºæ‰“ä¹±æ•°ç»„
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // åˆ›å»ºå½©çº¸æ•ˆæœ
        function createConfetti() {
            const colors = ['#667eea', '#764ba2', '#f093fb', '#f5576c', '#4facfe', '#00f2fe'];
            for (let i = 0; i < 30; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                confetti.style.opacity = Math.random();
                document.body.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 4000);
            }
        }

        // åˆå§‹åŒ–
        selectLevel('cet4');
    </script>
</body>
</html>